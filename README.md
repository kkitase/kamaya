# Kamaya Project

**Kamaya Project** は、FoodHub Project が発行するニュースレター『かま屋通信』をデジタルアーカイブし、AI を活用して多角的に分析・コンテンツ展開するためのプラットフォームです。

現在、99 号分（2025年12月号まで）のバックナンバーを収集・分析の対象としており、PDF の保存から食材トレンドの可視化、そして AI ライターによるマルチメディアコンテンツへの変換フローを支援します。

---

## 🚀 主な機能

1.  **アーカイブ & 収集**
    *   公式サイトから 99 号分以上のバックナンバーを自動スクレイピング。
    *   `downloads/` ディレクトリにて、号ごとのアセット（PDF、画像、生成テキスト）を一元管理。

2.  **AI 分析 (Powered by Gemini 3.0 Flash)**
    *   PDF を解析し、**食材・料理・調理法・季節キーワード** を抽出。
    *   出現頻度に基づいたランキングやトレンドを可視化。
    *   CSV / JSON 形式でのデータエクスポートに対応。

3.  **ペルソナ駆動のコンテンツ生成 (Content Repurposing)**
    *   **「かま屋通信」専用のペルソナプロンプト** を搭載。プロジェクトの想いや温かみのあるトーンで、ブログ・SNS・動画・ポッドキャストなどのコンテンツを自動生成します。
    *   対応フォーマット: ブログ記事ドラフト、X (Twitter) 投稿、動画構成案 & プロンプト、ポッドキャスト台本。

---

## 💡 解析精度を向上させるための Tips

AI が PDF の文字情報を 100% 正しく読み取れるようにするため、以下の書き出し設定を推奨します。

*   **PDF/X 形式（印刷用）ではなく「インタラクティブ PDF」を使用する**: 印刷用プリセットは文字が「図形」として扱われることがあり、AI がテキストを認識できない場合があります。
*   **文字のアウトライン化を避ける**: テキストデータとして選択・検索可能な状態で保存してください。
*   **シンプルな段組**: 複雑すぎるレイアウトは読み上げ順序を乱す原因になります。

---

## 📂 ディレクトリ構造

プロジェクトは、アプリケーションとコンテンツデータの 2 つの領域で構成されています。

```
kamaya/
├── src/                # Next.js アプリケーション
│   └── app/
│       ├── page.tsx    # 分析ダッシュボード UI
│       └── api/        # バックエンド API (Scrape, Analyze, Generate, etc.)
│
├── downloads/          # コンテンツアーカイブ (Git管理対象)
│   ├── 『かま屋_通信』YYYY年MM月号.pdf   # 原本 PDF
│   ├── kamaya_persona_prompt.md         # コンテンツ生成用ペルソナ定義
│   │
│   └── kamaya-YYYY-MM/ # 号ごとの生成コンテンツパッケージ
│       ├── 01_summary.md        # AIによる要約
│       ├── 02_blog_draft.md     # ブログ記事ドラフト
│       ├── 03_images/           # 記事から抽出・生成した画像
│       ├── 04_x_posts.md        # SNS投稿案
│       ├── 05_video_prompt.md   # 動画生成用プロンプト
│       ├── 06_podcast_script.md # 音声コンテンツ台本
│       └── README.md            # コンテンツ管理票
│
├── public/             # 静的アセット
└── README.md           # 本ファイル
```

---

## 🛠 技術スタック

*   **Framework**: Next.js 16 (App Router)
*   **Language**: TypeScript
*   **Styling**: Tailwind CSS v4
*   **AI Model**: Google Gemini 3.0 Flash (via Google Generative AI SDK)
*   **Scraping**: Cheerio
*   **PDF Processing**: PDF.js

---

## 🚦 セットアップと実行

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで [http://localhost:3000](http://localhost:3000) を開き、アプリケーションにアクセスします。

### 3. Gemini API キーの準備

分析およびコンテンツ生成機能を使用するには、Google Gemini API キーが必要です。
[Google AI Studio](https://aistudio.google.com/) からキーを取得し、画面上の入力フィールドに入力してください。

---

## 📝 運用ワークフロー

### Step 1: 収集 (Collect)
アプリの「記事を集める」および「PDFを手元に」機能を使い、最新の『かま屋通信』を `downloads/` フォルダに取り込みます。

### Step 2: 分析 (Analyze)
「分析を実行」ボタンで AI 解析を行います。食材の傾向や季節のトピックを把握し、レポート (JSON/CSV) を出力します。

### Step 3: 展開 (Expand)
「コンテンツ生成」機能を使用します。**`kamaya_persona_prompt.md`** に定義されたペルソナに基づき、各号のディレクトリにマルチメディアコンテンツを自動生成・格納します。

---

## 📜 ライセンス

このプロジェクトのソースコードは MIT License の下で公開されています。
『かま屋通信』のコンテンツ自体の著作権は株式会社フードハブ・プロジェクトに帰属します。